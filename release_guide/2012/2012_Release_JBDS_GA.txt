== Release JBDS to GA ==

# TODO in product/features/com.jboss.jbds.product.feature/p2.inf
# TODO when releasing GA make sure to :%s/development/stable/g and :%s/6.0-staging/6.0/g

Assuming content (update sites and installers) are already staged to wallace, all you need to do is update pointers:

1. Tag SVN

	# if not tagging from tip of the branch, use git log to determine the revision needed to tag, eg., http://svn.jboss.org/repos/devstudio/!svn/bc/${rev}/branches/devstudio-6.0.x/
	branch=6.0.x
	version=6.0.1.GA
	rev=9782
	svn -m "tag revision ${rev} as ${branch}" -r ${rev} copy http://svn.jboss.org/repos/devstudio/branches/devstudio-6.0.x/ http://svn.jboss.org/repos/devstudio/tags/devstudio-${version}/

	#else just do this
	branch=6.0.x
	version=6.0.1.GA
	svn -m "tag for ${branch}" copy http://svn.jboss.org/repos/devstudio/branches/devstudio-${branch}/ http://svn.jboss.org/repos/devstudio/tags/devstudio-${version}/

2. update https://devstudio.jboss.com/updates/6.0/ from https://devstudio.jboss.com/updates/6.0-staging/, using 
beyondcompare to selectively copy and edit files

# ** TODO: JBIDE-11111 process for pushing Central discovery files needs to change soon **

3. update https://devstudio.jboss.com/updates/6.0/devstudio-directory.xml from https://devstudio.jboss.com/updates/6.0-staging/devstudio-directory.xml

4. ensure that discovery plugin points at the RELEASE URL, not the STAGING one

	# IF THIS IS GA, ensure that your plugin points to the RELEASE URL, not the STAGING one:
	cd ~/truu/devstudio.jboss.com/updates/6.0/
	newJar=$(find discovery -name com.jboss.jbds.central.discovery_${version}\*.jar)
	unzip -d ~/truu/devstudio.jboss.com/updates/6.0/${newJar}{_,}
	pushd ~/truu/devstudio.jboss.com/updates/6.0/${newJar}_ >/dev/null 
	sed -i "s#https://devstudio.jboss.com/updates/6.0-staging/central/core/#https://devstudio.jboss.com/updates/6.0/central/core/#g" plugin.xml
	zip -u ~/truu/devstudio.jboss.com/updates/6.0/${newJar} plugin.xml
	popd >/dev/null
	rm -fr ~/truu/devstudio.jboss.com/updates/6.0/${newJar}_

5. post GA update to https://devstudio.jboss.com/earlyaccess/ (do NOT host EAP bundles)

--> see ../2012_Release_JBDS_Early_Access.txt

6. update https://devstudio.jboss.com/updates/ 

	add new release and later add new docs when available

7. update https://devstudio.jboss.com/download/

	add new release and later add new docs when available

8. add new files, commit changes.
